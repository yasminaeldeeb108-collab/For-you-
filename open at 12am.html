<!DOCTYPE html>
<html lang="en">
<head>
    
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>To my dear paythonista</title>
    <style>
        :root {
            --stroke: #333;
            --pupil: #fff;
        }
        body {
            background: radial-gradient(circle, #131d83ff 0%, #061f52ff  80%);
            background-repeat: no-repeat;
            background-size: cover;
            background-position: center;
            margin: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            font-family: 'serif';
            overflow: hidden;
            color: white;
        }
        #birthday-button {
            padding: 20px 40px;
            font-size: 1.5rem;
            border: none;
            border-radius: 15px;
            background: rgb(255, 255, 255);
            color: #c91d81;
            cursor: pointer;
            font-weight: bold;
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
            transition: transform 0.2s;
        }
        #birthday-button:active { transform: scale(0.9); }

        .birthday-button__cake {
    position: absolute;
    bottom: 0; 
    left: 50%;
    transform: translate(-50%, 0);
    width: 350px; /* Increased from 289.5px to make it slightly bigger */
    display: none;
    animation: cakeBounce 0.8s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    filter: drop-shadow(0 10px 20px rgba(221, 59, 59, 0.2)); 
    transition: transform 0.2s;
    cursor: pointer;

}

        @keyframes cakeBounce {
            0% { transform: translate(-50%, 100px) scale(0.5); opacity: 0; }
            60% { transform: translate(-50%, -20px) scale(1.1); }
            100% { transform: translate(-50%, 0) scale(1); opacity: 1; }
        }

        .cake__eye-body { fill: var(--stroke); }
        .cake__eye-pupil { fill: var(--pupil); }
        
        .flame {
            animation: flicker 0.1s infinite alternate;
            transition: all 0.5s ease;
        }
        .flame.out {
            opacity: 0;
            transform: translateY(-30px) scale(0);
        }

        #status-text {
            position: absolute;
            top: 15%;
            font-size: 1.8rem;
            color: #c91d81;
            font-weight: bold;
            text-align: center;
            width: 100%;
            text-shadow: 0 0 10px rgba(255, 255, 255, 0.8), 
            0 0 20px rgba(201, 29, 129, 0.5); 
            transition: opacity 0.8s ease-in-out, transform 0.5s ease;
            opacity: 1;
        }

        .letter {
            position: absolute;
            font-weight: bold;
            font-size: 32px;
            pointer-events: none;
            animation: floatUp 3s ease-out forwards;
        }

        @keyframes floatUp {
            0% { transform: translate(0, 0) rotate(0deg); opacity: 1; }
            100% { transform: translate(var(--tx), var(--ty)) rotate(var(--tr)); opacity: 0; }
        }

        @keyframes flicker {
            from { transform: scale(1); }
            to { transform: scale(1.1); }
        }
        .hidden {
    opacity: 0 !important;
    pointer-events: none;
    transform: translateY(-10px);
}
    </style>
</head>
<body>

    <button id="birthday-button"> Tab for a surprise! </button>
    <p id="status-text" class="hidden">Blow into the mic! üå¨Ô∏è</p>
    
    <div class="birthday-button__cake" id="cake">
        <svg viewBox="0 0 200 200">
            <rect x="30" y="110" width="140" height="70" fill="#a29bfe" rx="15" />
            
            <path d="M30 110 Q30 95 45 95 L155 95 Q170 95 170 110 L170 125 Q160 135 150 125 Q140 115 130 125 Q120 135 110 125 Q100 115 90 125 Q80 135 70 125 Q60 115 50 125 Q40 135 30 125 Z" fill="#ffffff" />
            
            <rect x="50" y="140" width="8" height="4" fill="#ff6b6b" rx="2" />
            <rect x="80" y="155" width="8" height="4" fill="#feca57" rx="2" />
            <rect x="120" y="145" width="8" height="4" fill="#48dbfb" rx="2" />
            <rect x="150" y="150" width="8" height="4" fill="#ff9ff3" rx="2" />

            <circle class="cake__eye-body" cx="70" cy="145" r="7" />
            <circle class="cake__eye-pupil" cx="72" cy="143" r="2.5" />
            <circle class="cake__eye-body" cx="130" cy="145" r="7" />
            <circle class="cake__eye-pupil" cx="132" cy="143" r="2.5" />
            
            <rect x="60" y="65" width="8" height="30" fill="#fff" rx="2" />
            <circle class="flame" cx="64" cy="55" r="6" fill="#ffeb3b" />
            
            <rect x="96" y="55" width="8" height="40" fill="#fff" rx="2" />
            <circle class="flame" cx="100" cy="45" r="7" fill="#ffeb3b" />
            
            <rect x="132" y="65" width="8" height="30" fill="#fff" rx="2" />
            <circle class="flame" cx="136" cy="55" r="6" fill="#ffeb3b" />
        </svg>
    </div>
    <div id="text-container"></div>

    <script>
        const button = document.getElementById('birthday-button');
        const cake = document.getElementById('cake');
        const statusText = document.getElementById('status-text');
        const textContainer = document.getElementById('text-container');
        const message = "HAPPY BIRTHDAY!";
        const colors = ['#ff6b6b', '#feca57', '#48dbfb', '#ff9ff3', '#54a0ff'];

        button.addEventListener('click', async () => {
            button.style.display = 'none';
            cake.style.display = 'block';
            statusText.classList.remove('hidden');

            try {
                const stream = await navigator.mediaDevices.getUserMedia({ audio: true });
                const audioContext = new AudioContext();
                const analyzer = audioContext.createAnalyser();
                const microphone = audioContext.createMediaStreamSource(stream);
                analyzer.fftSize = 512;
                const dataArray = new Uint8Array(analyzer.frequencyBinCount);
                microphone.connect(analyzer);

                function checkVolume() {
                    analyzer.getByteFrequencyData(dataArray);
                    let sum = 0;
                    for (let i = 0; i < dataArray.length; i++) { sum += dataArray[i]; }
                    let average = sum / dataArray.length;
                    if (average > 40) {
                        blowOut();
                        stream.getTracks().forEach(track => track.stop());
                        return;
                    }
                    requestAnimationFrame(checkVolume);
                }
                checkVolume();
            } catch (err) {
                statusText.innerText = "Tap the cake to blow!";
                cake.onclick = blowOut;
            }
        });

        function blowOut() {
            //ŸÑŸà ÿ®ÿ™ŸÇÿ±ÿßŸá ŸÅ ÿßŸÜÿß ÿ®ÿ≠ÿ®ŸÉ //
            const flames = document.querySelectorAll('.flame');
            flames.forEach(f => f.classList.add('out'));
            statusText.style.opacity = '0';
            setTimeout(() => {
            statusText.innerText = "‚ù§Ô∏è Wish you the best this year dear, Happy 19th birthday üéÇ‚ù§Ô∏è";
            statusText.style.opacity = '1'; // Fade back in with the new message
    }, 400); 

    createExplosion(); //
}
        

        function createExplosion() {
            for (let i = 0; i < 40; i++) {
                const span = document.createElement('span');
                span.className = 'letter';
                span.innerText = message[Math.floor(Math.random() * message.length)];
                span.style.color = colors[Math.floor(Math.random() * colors.length)];
                span.style.left = '50%';
                span.style.top = '60%';
                const tx = (Math.random() - 0.5) * 600;
                const ty = -Math.random() * 500 - 100;
                const tr = (Math.random() - 0.5) * 1000;
                span.style.setProperty('--tx', `${tx}px`);
                span.style.setProperty('--ty', `${ty}px`);
                span.style.setProperty('--tr', `${tr}deg`);
                textContainer.appendChild(span);
                setTimeout(() => span.remove(), 3000);
            }
        }
    </script>
</body>
</html>